(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1028:function(e,a,t){"use strict";t.r(a);var s=t(114),n=t(115),l=t(118),r=t(116),i=t(117),c=t(131),d=t(1),o=t.n(d),u=t(152),m=t(945),p=t(949),E=t(956),g=t(8),h=t.n(g),S=t(933),U=t.n(S),b=t(932),f=t(990),P=t.n(f),v=(t(991),t(151)),I=t.n(v),N=t(119),y=Object(N.a)();var A={updateUserInfo:function(e){return function(a){a({type:"UPDATE_USER_DETAILS"});var t=null;I.a.get("/session/token").then(function(s){t=s.data,y.headers["X-CSRF-Token"]=t,I.a.post("/api/v1/userUpdate?_format=json",e,y).then(function(e){a({type:"UPDATE_USER_DETAILS_SUCCESS",payload:e}),a({type:"SUCCESS_MESSAGE",payload:e})}).catch(function(e){a({type:"UPDATE_USER_DETAILS_FAILURE",payload:e.response}),a({type:"ADD_ERROR_WITHOUT_LOGOUT",payload:e})})})}},updateUserImage:function(e){return function(a){a({type:"UPDATE_USER_IMAGE"});var t=null;I.a.get("/session/token").then(function(s){t=s.data,y.headers["X-CSRF-Token"]=t,I.a.post("/api/v1/user/profile/picture?_format=json",e,y).then(function(e){a({type:"UPDATE_USER_IMAGE_SUCCESS",payload:e}),a({type:"SUCCESS_MESSAGE",payload:e})}).catch(function(e){a({type:"UPDATE_USER_IMAGE_FAILURE",payload:e.response}),a({type:"ADD_ERROR_WITHOUT_LOGOUT",payload:e})})})}},updateUserPass:function(e){return function(a){a({type:"UPDATE_USER_PASSWORD"});var t=null;I.a.get("/session/token").then(function(s){t=s.data,y.headers["X-CSRF-Token"]=t,I.a.post("/api/v1/passwordChange?_format=json",e,y).then(function(e){a({type:"UPDATE_USER_PASSWORD_SUCCESS",payload:e}),a({type:"SUCCESS_MESSAGE",payload:e}),Object(N.e)()}).catch(function(e){a({type:"UPDATE_USER_PASSWORD_FAILURE",payload:e.response}),a({type:"ADD_ERROR_WITHOUT_LOGOUT",payload:e})})})}}},D=t(265),O=t(82),C=t(264),w=localStorage.getItem("user"),j=JSON.parse(w),R=function(e){function a(){var e;return Object(s.a)(this,a),(e=Object(l.a)(this,Object(r.a)(a).call(this))).state={activeState:!1,user:j,userImage:j.userPicture,updatedUserImage:!0,tooltipOpen:!1,form:{firstName:j.firstName,lastName:j.lastName}},e.handleSubmit=e.handleSubmit.bind(Object(c.a)(Object(c.a)(e))),e.handleCancel=e.handleCancel.bind(Object(c.a)(Object(c.a)(e))),e.handleUpload=e.handleUpload.bind(Object(c.a)(Object(c.a)(e))),e.handlePassDialog=e.handlePassDialog.bind(Object(c.a)(Object(c.a)(e))),e.toggle=e.toggle.bind(Object(c.a)(Object(c.a)(e))),e}return Object(i.a)(a,e),Object(n.a)(a,[{key:"handleSubmit",value:function(e){if(this.state.enablePassDialog){var a={currentPassword:U.a.AES.encrypt(e.oldPass,N.d).toString(),newPassword:U.a.AES.encrypt(e.newPass,N.d).toString()};this.props.updateUserPass(a)}else{var t={firstName:this.state.firstName,lastName:this.state.lastName};this.props.updateUserInfo(t)}}},{key:"handlePassDialog",value:function(e){e.target.checked?this.setState({enablePassDialog:!0}):this.setState({enablePassDialog:!1})}},{key:"toggle",value:function(){this.setState({tooltipOpen:!this.state.tooltipOpen})}},{key:"handleCancel",value:function(){this.props.history.goBack()}},{key:"handleUpload",value:function(){var e=document.getElementById("userUpload").files[0],a=document.getElementById("userUpload").files[0].name,t=document.getElementById("userUpload").files[0].type,s=new FileReader,n=this;e&&(s.readAsDataURL(e),-1===["image/jpeg","image/png","image/jpg"].indexOf(t)&&s.abort()),s.addEventListener("loadend",function(e){if(e.currentTarget.result){var t=e.currentTarget.result.split(","),s={filename:a,image:t[1]};n.props.updateUserImage(s)}})}},{key:"componentWillReceiveProps",value:function(e){var a=e.updatingUserDetails,t=e.updatedUserDetails,s=e.userEdit;if(null!==e.userEditStatus&&this.setState({activeState:!1}),t&&!this.state.updatedUserDetails)if(s.status){var n=this.state.user;n.firstName=this.state.firstName,n.lastName=this.state.lastName,localStorage.setItem("user",JSON.stringify(n)),this.setState({user:n,updatedUserDetails:!0})}else this.setState({activeState:!1});a&&this.setState({updatedUserDetails:!1,activeState:!0});var l=e.updatingUserImage,r=e.updatedUserImage,i=e.userImage;if(r&&!this.state.updatedUserImage)if(i.status){var c=this.state.user;c.userPicture=i.image,localStorage.setItem("user",JSON.stringify(c)),this.setState({userImage:i.image,updatedUserImage:!0,activeState:!1})}else this.setState({activeState:!1});l&&this.setState({updatedUserImage:!1,activeState:!0});var d=e.updatingUserPass,o=e.updatedUserPass,u=e.userPass,m=e.userPassStatus;o&&!this.state.updatedUserPass&&(u&&Number(m)===Number(200)?(this.setState({updatedUserPass:!0}),setTimeout(function(){window.location=O.h},2e3)):this.setState({activeState:!1})),d&&this.setState({updatedUserPass:!1,activeState:!0})}},{key:"render",value:function(){var e=this,a=this.state.form,t=a.firstName,s=a.lastName;return o.a.createElement("div",{className:"user-profile user-edit"},o.a.createElement(m.a,null,o.a.createElement(p.a,{xs:12,className:"user-picture"},o.a.createElement("div",{className:"profile-image"},o.a.createElement("div",{className:"picture"},o.a.createElement("img",{src:this.state.userImage?this.state.userImage:P.a,alt:"user-profile"}),!this.state.updatedUserImage&&o.a.createElement("div",{className:"loader"},o.a.createElement("div",{className:"text-center"},Object(D.c)())),o.a.createElement("input",{type:"file",name:"user_uploaded",id:"userUpload",onChange:this.handleUpload,autoComplete:"off"})))),o.a.createElement(p.a,{xs:12,className:"user-login user-data"},o.a.createElement(b.d,{initialValues:{firstName:t,lastName:s,oldPass:"",newPass:"",confirmPass:""},validate:function(a){var t={};return e.state.enablePassDialog||(t={},a.firstName||(t.firstName=C.cb),a.lastName||(t.lastName=C.cb),a.lastName&&a.firstName&&e.setState({firstName:a.firstName,lastName:a.lastName})),e.state.enablePassDialog&&(t={},a.oldPass||(t.oldPass=C.cb),a.newPass||(t.newPass=C.cb),a.newPass&&(/(?=.*?[A-Z])/g.test(a.newPass)&&/(?=.*?[a-z])/g.test(a.newPass)?/(?=.*?[0-9])/g.test(a.newPass)?/(?=.*?[#?!@$%^&*-])/g.test(a.newPass)?a.newPass.length<8&&(t.newPass=C.G):t.newPass=C.ub:t.newPass=C.b:t.newPass=C.ub),a.confirmPass||(t.confirmPass=C.cb),a.newPass!==a.confirmPass&&(t.confirmPass=C.Q)),0!==Object.keys(t).length?e.setState({subDisabled:!0}):e.setState({subDisabled:!1}),t},onSubmit:function(a){e.handleSubmit(a)}},o.a.createElement(b.c,null,o.a.createElement("div",{className:h()("user-details",{disabled:this.state.enablePassDialog})},o.a.createElement(p.a,{className:h()("name first profile-data",{disabled:this.state.activeState})},o.a.createElement("div",{className:"field"},o.a.createElement("label",null,C.n)),o.a.createElement("div",{className:"field"},o.a.createElement(b.b,{type:"text",name:"firstName",placeholder:C.n,autoComplete:"off"}),o.a.createElement(b.a,{name:"firstName",component:"div",className:"error-msg"}))),o.a.createElement(p.a,{className:h()("name last profile-data",{disabled:this.state.activeState})},o.a.createElement("div",{className:"field"},o.a.createElement("label",null,C.B)),o.a.createElement("div",{className:"field"},o.a.createElement(b.b,{type:"text",name:"lastName",placeholder:C.B,autoComplete:"off"}),o.a.createElement(b.a,{name:"lastName",component:"div",className:"error-msg"})))),o.a.createElement("div",{className:h()("pass-dialog",{disabled:this.state.activeState})},o.a.createElement("label",{htmlFor:"passDialog",className:h()("form-check-label",{active:this.state.enablePassDialog})},o.a.createElement("input",{type:"checkbox",placeholder:C.B,autoComplete:"off",id:"passDialog",onChange:this.handlePassDialog,className:"form-check-input"}),C.fb)),this.state.enablePassDialog&&o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{className:h()("name old-pass profile-data",{disabled:this.state.activeState})},o.a.createElement("div",{className:"field"},o.a.createElement("label",null,C.N)),o.a.createElement("div",{className:"field"},o.a.createElement(b.b,{type:"password",name:"oldPass",placeholder:C.N}),o.a.createElement(b.a,{name:"oldPass",component:"div",className:"error-msg"}))),o.a.createElement(p.a,{className:h()("name old-pass profile-data",{disabled:this.state.activeState})},o.a.createElement("div",{className:"field"},o.a.createElement("label",null,C.J)),o.a.createElement("div",{className:"field"},o.a.createElement(b.b,{type:"password",name:"newPass",placeholder:C.J,id:"passTip"}),o.a.createElement(E.a,{placement:"top",isOpen:this.state.tooltipOpen,target:"passTip",toggle:this.toggle},"- ".concat(C.G),o.a.createElement("br",null),"- ".concat(C.b),o.a.createElement("br",null),"- ".concat(C.ub)),o.a.createElement(b.a,{name:"newPass",component:"div",className:"error-msg"}))),o.a.createElement(p.a,{className:h()("name old-pass profile-data",{disabled:this.state.activeState})},o.a.createElement("div",{className:"field"},o.a.createElement("label",null,C.h)),o.a.createElement("div",{className:"field"},o.a.createElement(b.b,{type:"password",name:"confirmPass",placeholder:C.gb}),o.a.createElement(b.a,{name:"confirmPass",component:"div",className:"error-msg"})))),o.a.createElement("div",{className:"col-12 my-5 field-content more-link"},o.a.createElement("button",{type:"submit",className:h()("btn btn-outline-secondary text-uppercase",{disabled:this.state.activeState||this.state.subDisabled})},C.hb),o.a.createElement("button",{type:"button",className:h()("btn btn-outline-secondary text-uppercase",{disabled:this.state.activeState||this.state.subDisabled}),onClick:this.handleCancel},C.c)))))))}}]),a}(d.Component);var B=Object(u.b)(function(e){var a=e.userEdit,t=a.updatingUserDetails,s=a.updatedUserDetails,n=a.userEdit,l=a.userEditError,r=a.userEditStatus,i=e.userImage,c=i.updatingUserImage,d=i.updatedUserImage,o=i.userImage,u=i.userImageError,m=i.userImageStatus,p=e.userPass;return{updatingUserDetails:t,updatedUserDetails:s,userEdit:n,userEditError:l,updatingUserImage:c,updatedUserImage:d,userImage:o,userImageError:u,updatingUserPass:p.updatingUserPass,updatedUserPass:p.updatedUserPass,userPass:p.userPass,userPassError:p.userPassError,userEditStatus:r,userImageStatus:m,userPassStatus:p.userPassStatus}},function(e){return{updateUserInfo:function(a){return e(A.updateUserInfo(a))},updateUserImage:function(a){return e(A.updateUserImage(a))},updateUserPass:function(a){return e(A.updateUserPass(a))}}})(R);a.default=B},990:function(e,a){e.exports="data:image/png;base64,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"},991:function(e,a,t){}}]);