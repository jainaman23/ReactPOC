(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1010:function(e,t,a){"use strict";a.r(t);var n=a(114),o=a(115),r=a(118),i=a(116),s=a(117),c=a(1),l=a.n(c),u=a(152),g=a(945),p=a(929),d=a.n(p),m=a(971),h=a(131),f=a(932),E=a(267),b=a(941),S=a(942),O=a(8),y=a.n(O),v=a(933),_=a.n(v),L=a(507),U=a.n(L),k=a(265),C=a(119),R=a(82),F=a(264),A=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).handleLoginSubmit=function(e){if(a.setState({loginData:e}),a.state.remember){var t=_.a.AES.encrypt(JSON.stringify(e),"adf_elc_key");U.a.save("remember",t.toString(),{path:"/"})}else U.a.remove("remember",{path:"/"});var n=_.a.AES.encrypt(e.password,C.d);a.props.login(e.email,n.toString())},a.toggleCheckbox=function(e){var t=document.getElementById(e.target.id).checked;a.setState({remember:t})},a.state={show:!0,loginData:{},remember:!1,email:"",password:""},a.handleLoginSubmit=a.handleLoginSubmit.bind(Object(h.a)(Object(h.a)(a))),a.toggleCheckbox=a.toggleCheckbox.bind(Object(h.a)(Object(h.a)(a))),a.loadingRender=a.loadingRender.bind(Object(h.a)(Object(h.a)(a))),a.getNeedHelp=a.getNeedHelp.bind(Object(h.a)(Object(h.a)(a))),a.loginStatus=a.loginStatus.bind(Object(h.a)(Object(h.a)(a))),a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=U.a.load("remember");if(e){var t=_.a.AES.decrypt(e,"adf_elc_key"),a=JSON.parse(t.toString(_.a.enc.Utf8));this.setState({email:a.email,password:a.password,remember:!0})}}},{key:"loadingRender",value:function(){return l.a.createElement("div",{className:"text-center"},Object(k.c)())}},{key:"loginStatus",value:function(){var e=this.props,t=e.fetching,a=e.fetched,n=e.userLoginError;return t||a&&null===n?l.a.createElement("div",{className:"login-status"},this.loadingRender()):a&&n&&0!==n.length?l.a.createElement("div",{className:"text-center"},l.a.createElement("p",null,n.data)):void 0}},{key:"getEmail",value:function(){var e=this.props.supportEmail;return l.a.createElement("div",{className:y()("need-help",{disabled:0===e.length||""===e.URL})},l.a.createElement("a",{href:"mailto:".concat(e)},F.H))}},{key:"getNeedHelp",value:function(){var e=this.props,t=e.fetchingSupportEmail,a=e.fetchedSupportEmail,n=e.supportEmail;return window.localStorage.getItem("email")?this.getEmail():t?l.a.createElement("div",{className:"need-help"},this.loadingRender()):a&&n?this.getEmail():void 0}},{key:"render",value:function(){var e=this;return this.props.isOpen&&!1!==this.props.isOpen?l.a.createElement(f.d,{initialValues:{email:this.state.email,password:this.state.password},validate:function(e){var t={};return e.email?/\s?\w+\s/i.test(e.email)&&(t.email=F.y):t.email=F.cb,e.password||(t.password=F.cb),t},onSubmit:function(t,a){var n=a.setSubmitting;setTimeout(function(){n(!1),e.handleLoginSubmit(t)},400)},enableReinitialize:!0},function(t){var a=t.isSubmitting;return l.a.createElement(f.c,{className:y()({disabled:e.props.fetching||e.props.fetched&&null===e.props.userLoginError})},e.loginStatus(),l.a.createElement(f.b,{type:"text",name:"email",placeholder:F.Cb,autoComplete:"off"}),l.a.createElement(f.a,{name:"email",component:"div",className:"error-msg"}),l.a.createElement(f.b,{type:"password",name:"password",placeholder:F.P,autoComplete:"off"}),l.a.createElement(f.a,{name:"password",component:"div",className:"error-msg"}),l.a.createElement("div",{className:y()("more-link",{"d-none":!e.state.show})},l.a.createElement("button",{type:"submit",className:y()("btn btn-outline-secondary text-uppercase",{disabled:a})},F.tb)),l.a.createElement("div",{className:"extended"},l.a.createElement(E.b,{className:"forget-password",to:R.k},F.o),l.a.createElement("a",{href:R.j,className:"registration"},"".concat(F.K," ").concat(F.X)),l.a.createElement(b.a,{check:!0,for:"remember-me",className:y()({active:e.state.remember})},l.a.createElement(S.a,{type:"checkbox",id:"remember-me",name:"remember_me",onChange:e.toggleCheckbox,autoComplete:"off"}),F.bb)),e.getNeedHelp())}):null}}]),t}(c.Component),N=a(268),j=a(958),w=a(943),I=a(944),T=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("section",{className:"loading"},l.a.createElement("img",{className:"loading-icon",src:R.f,alt:"loader"}))}}]),t}(c.Component),D=(a(972),a(151)),G=a.n(D),B=Object(C.a)();var x={updateUserFlag:function(e){return C.f||(B={headers:{Authorization:"".concat(e.tokenType," ").concat(e.accessToken)}}),function(e){e({type:"UPDATE_USER_FLAG"});var t=null;G.a.get("/session/token").then(function(a){t=a.data,B.headers["X-CSRF-Token"]=t,G.a.post("/api/v1/userPolicyFlag?_format=json",{flagStatus:1},B).then(function(t){e({type:"UPDATE_USER_FLAG_SUCCESS",payload:t.data})}).catch(function(t){e({type:"UPDATE_USER_FLAG_FAILURE",payload:t.response.data.message}),e({type:"ADD_ERROR",payload:t})})})}}},P=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).acceptLogin=function(){a.state.agree1&&a.state.agree2&&a.props.updateUserFlag(a.props.userLoginCredentails)},a.toggleCheckbox=function(e){var t=document.getElementById(e.target.id),n=e.target.name,o=t.checked;a.setState(Object(N.a)({},n,o))},a.logout=function(){a.setState({logout:!0}),a.props.logout()},a.state={agree1:!1,agree2:!1,active:!1},a.logout=a.logout.bind(Object(h.a)(Object(h.a)(a))),a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(e.updatedUserFlag)if(e.userFlag)e.redirectLogin();else{var t=localStorage.getItem("user");if(t){var a=JSON.parse(t);a.policyFlag=!0,localStorage.setItem("user",JSON.stringify(a))}}}},{key:"render",value:function(){var e=this.props,t=e.isOpen,a=e.updatingUserFlag,n=e.updatedUserFlag;return l.a.createElement(j.a,{className:"tool-modal",isOpen:t,centered:!0},a||this.state.logout||n?l.a.createElement("div",{className:"loader text-center"},Object(k.c)()):null,l.a.createElement("div",{className:"modal-header"},l.a.createElement("button",{type:"button",onClick:this.logout,className:"close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),t?l.a.createElement(w.a,null,l.a.createElement(I.a,{check:!0},l.a.createElement(b.a,{check:!0,for:"agree1",className:y()({active:this.state.agree1}),disabled:a},l.a.createElement(S.a,{type:"checkbox",id:"agree1",name:"agree1",value:this.state.agree1,onChange:this.toggleCheckbox}),F.yb," ",l.a.createElement("a",{href:R.m,target:"_blank",rel:"noopener noreferrer"},F.zb))),l.a.createElement(I.a,{check:!0},l.a.createElement(b.a,{check:!0,for:"agree2",className:y()({active:this.state.agree2})},l.a.createElement(S.a,{type:"checkbox",id:"agree2",name:"agree2",value:this.state.agree2,onChange:this.toggleCheckbox,disabled:a}),F.S," ",l.a.createElement("a",{href:R.i,target:"_blank",rel:"noopener noreferrer"},F.T))),l.a.createElement(g.a,{className:"text-center"},l.a.createElement("div",{className:"col more-link"},l.a.createElement("button",{className:y()("btn btn-outline-secondary text-uppercase",{active:this.state.agree1&&this.state.agree2},{disabled:!(this.state.agree1&&this.state.agree2)}),onClick:this.acceptLogin},F.a)))):l.a.createElement(T,null))}}]),t}(c.Component);P.defaultProps={isOpen:!1};var H=Object(u.b)(function(e){var t=e.userFlag;return{updatingUserFlag:t.updatingUserFlag,updatedUserFlag:t.updatedUserFlag,userFlag:t.userFlag,userFlagError:t.userFlagError}},function(e){return{updateUserFlag:function(t){return e(x.updateUserFlag(t))}}})(P),M=a(975),J=a(968),z=Object(C.a)();var K={getUserInfo:function(e){return C.f||(z={headers:{Authorization:"".concat(e.tokenType," ").concat(e.accessToken)}}),function(e){e({type:"FETCH_USER_DETAILS"}),G.a.get("/api/v1/userDashboard?_format=json",z).then(function(t){e({type:"FETCH_USER_DETAILS_SUCCESS",payload:t.data}),localStorage.setItem("user",JSON.stringify(t.data))}).catch(function(t){e({type:"FETCH_USER_DETAILS_FAILURE",payload:t.response.data.message}),e({type:"ADD_ERROR",payload:t})})}}},W=a(979),X=(a(970),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).redirectLogin=function(){window.location=R.c},a.toggleAcceptModal=function(){var e=!a.state.showAcceptModal;a.setState({showAcceptModal:e})},a.toggleForgot=function(){a.setState({showForgot:!a.state.showForgot})},a.state={background:"rgba(0,0,0,0.3)",true:!1,auth_in_progress:!1,showAcceptModal:!1,cred:!1,showForgot:!1,supportEmail:null},a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=d.a.parse(this.props.location.search).registration;if(e&&this.setState({registration:e}),Object(C.c)()||(this.props.getLoginBackground(),this.props.getGlobalSupportEmail()),C.f)this.props.getUserInfo(C.f),this.setState({active:!0});else if(window.localStorage.getItem("background")&&window.localStorage.getItem("email")){var t=JSON.parse(window.localStorage.getItem("background")),a=JSON.parse(window.localStorage.getItem("email"));this.setState({background:t.backGroundImage,supportEmail:a.supportEmail})}}},{key:"componentWillReceiveProps",value:function(e){var t=e.AuthenticatedUserCredentails,a=e.AuthenticatingUserCredentails,n=e.userLoginCredentails;void 0!==e.loginBackground.backGroundImage&&this.setState({background:e.loginBackground.backGroundImage}),a?this.setState({cred:!0}):t&&this.state.cred&&n&&""!==n.length&&(this.setState({cred:!1}),e.getUserInfo(n)),e.fetchedUserDetails&&(e.user&&e.user.policyFlag?(localStorage.setItem("user",JSON.stringify(e.user)),this.redirectLogin()):this.setState({showAcceptModal:!0}))}},{key:"render",value:function(){var e=this.props,t=e.AuthenticatedUserCredentails,a=e.AuthenticatingUserCredentails,n=e.fetchedFooter,o=e.fetchingFooter,r=e.footer,i=e.userLoginError,s=e.fetchingSupportEmail,c=e.fetchedSupportEmail,u=this.state.supportEmail?this.state.supportEmail:this.props.supportEmail;return l.a.createElement(g.a,null,l.a.createElement("div",{className:"user-login-wrapper col-12",style:{backgroundImage:"url("+this.state.background+")"}},l.a.createElement(J.a,null),l.a.createElement("div",{className:"user-login"},this.state.registration&&l.a.createElement("div",{className:"msg"},F.ab),l.a.createElement(A,{isOpen:!this.state.showForgot,onSubmitForm:this.toggleAcceptModal,login:this.props.submitLogin,fetching:a||this.state.active,fetched:t,userLoginError:i,fetchedFooter:n,fetchingFooter:o,footer:r,toggleForgot:this.toggleForgot,supportEmail:u,fetchedSupportEmail:c,fetchingSupportEmail:s}),l.a.createElement(H,{isOpen:this.state.showAcceptModal,toggle:this.toggleAcceptModal,logout:this.props.logout,redirectLogin:this.redirectLogin,userLoginCredentails:this.props.userLoginCredentails,user:this.props.user}))))}}]),t}(c.Component));var V=Object(u.b)(function(e){var t=e.userLogin,a=t.fetchingLoginBackground,n=t.fetchedLoginBackground,o=t.userLoginError,r=t.loginBackground,i=t.AuthenticatingUserCredentails,s=t.AuthenticatedUserCredentails,c=t.fetchingLogoutInfo,l=t.fetchedLogoutInfo,u=t.userLogout,g=t.userLoginCredentails,p=e.footer,d=p.fetchedFooter,m=p.fetchingFooter,h=p.footer,f=e.support,E=f.fetchingSupportEmail,b=f.fetchedSupportEmail,S=f.supportError,O=f.supportEmail,y=e.userDetails;return{fetchingLoginBackground:a,fetchedLoginBackground:n,userLoginError:o,loginBackground:r,AuthenticatingUserCredentails:i,AuthenticatedUserCredentails:s,fetchingLogoutInfo:c,fetchedLogoutInfo:l,userLogout:u,fetchedFooter:d,fetchingFooter:m,footer:h,userLoginCredentails:g,fetchingSupportEmail:E,fetchedSupportEmail:b,supportError:S,supportEmail:O,fetchingUserDetails:y.fetchingUserDetails,fetchedUserDetails:y.fetchedUserDetails,user:y.user,userDetailsError:y.userDetailsError}},function(e){return{getLoginBackground:function(){return e(m.a.getLoginBackground())},submitLogin:function(t,a){return e(m.a.submitLogin(t,a))},logout:function(){return e(W.a.submitLogout())},getGlobalSupportEmail:function(){return e(M.a.getGlobalSupportEmail())},getUserInfo:function(t){return e(K.getUserInfo(t))}}})(X);t.default=V},966:function(e,t,a){},967:function(e,t,a){e.exports=a.p+"images/Logo.31e15bfe.svg"},968:function(e,t,a){"use strict";var n=a(1),o=a.n(n),r=(a(966),a(967)),i=a.n(r),s=a(82);t.a=function(){return o.a.createElement("header",{className:"col-12 top-header"},o.a.createElement("div",{className:"logo text-center"},o.a.createElement("a",{href:s.g},o.a.createElement("img",{src:i.a,alt:"Aramis and Designer Fragrances"}))))}},970:function(e,t,a){},971:function(e,t,a){"use strict";var n=a(151),o=a.n(n),r=a(119);var i={getLoginBackground:function(){return function(e){e({type:"FETCH_LOGIN_BACKGROUND"}),o.a.get("/api/v1/loginBackgroundImage?_format=json").then(function(t){e({type:"FETCH_LOGIN_BACKGROUND_SUCCESS",payload:t.data}),window.localStorage.setItem("background",JSON.stringify(t.data))}).catch(function(t){e({type:"FETCH_LOGIN_BACKGROUND_FAILURE",payload:t}),e({type:"ADD_ERROR_WITHOUT_LOGOUT",payload:t})})}},submitLogin:function(e,t){return Object(r.e)(),function(a){a({type:"USER_LOGIN"}),o.a.post("/api/v1/login?_format=json",{username:e,password:t}).then(function(e){a({type:"USER_LOGIN_SUCCESS",payload:e.data})}).catch(function(e){a({type:"USER_LOGIN_FAILURE",payload:e.response}),a({type:"ADD_ERROR_WITHOUT_LOGOUT",payload:e})})}}};t.a=i},972:function(e,t,a){},975:function(e,t,a){"use strict";var n=a(151),o=a.n(n),r=a(119),i=Object(r.a)();var s={getGlobalSupportEmail:function(){return function(e){e({type:"FETCH_GLOBAL_SUPPORT_EMAIL"}),o.a.get("/api/v1/globalSupportEmail?_format=json").then(function(t){e({type:"FETCH_GLOBAL_SUPPORT_EMAIL_SUCCESS",payload:t.data}),window.localStorage.setItem("email",JSON.stringify(t.data))}).catch(function(t){e({type:"FETCH_GLOBAL_SUPPORT_EMAIL_FAILURE",payload:t.response}),e({type:"ADD_ERROR",payload:t})})}},getUserSupportEmail:function(){return function(e){e({type:"FETCH_USER_SUPPORT_EMAIL"}),o.a.get("/api/v1/supportEmail?_format=json",i).then(function(t){e({type:"FETCH_USER_SUPPORT_EMAIL_SUCCESS",payload:t.data})}).catch(function(t){e({type:"FETCH_USER_SUPPORT_EMAIL_FAILURE",payload:t.response}),e({type:"ADD_ERROR",payload:t})})}}};t.a=s},979:function(e,t,a){"use strict";var n=a(151),o=a.n(n),r=a(119),i=a(82);var s={submitLogout:function(){return localStorage.clear(),function(e){e({type:"USER_LOGOUT"}),o.a.get("/session/token").then(function(t){o.a.post("/api/v1/logout?_format=json",{token:r.f},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r.f),"X-CSRF-Token":t.data}}).then(function(t){e({type:"USER_LOGOUT_SUCCESS",payload:t.data}),200===t.status&&(Object(r.e)(),window.location=i.g)}).catch(function(t){e({type:"USER_LOGOUT_FAILURE",payload:t.response}),e({type:"ADD_ERROR",payload:t}),window.location=i.c})})}}};t.a=s}}]);