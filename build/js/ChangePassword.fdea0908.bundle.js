(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1017:function(e,t,a){"use strict";a.r(t);var n=a(114),o=a(115),r=a(118),s=a(116),c=a(117),i=a(1),l=a.n(i),d=a(152),m=a(945),u=a(131),p=a(956),g=a(932),f=a(8),h=a.n(f),b=a(933),E=a.n(b),w=a(267),O=a(265),S=a(82),y=a(119),v=a(264),R=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).state={show:!0,tooltipOpen:!1,form:{email:"",password:"",confirmPassword:"",otp:""}},a.toggle=a.toggle.bind(Object(u.a)(Object(u.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(Object(u.a)(a))),a.loadingRender=a.loadingRender.bind(Object(u.a)(Object(u.a)(a))),a.checkStatus=a.checkStatus.bind(Object(u.a)(Object(u.a)(a))),a.resend=a.resend.bind(Object(u.a)(Object(u.a)(a))),a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"handleSubmit",value:function(e){if(this.setState({form:e}),e.email&&e.otp&&e.password&&e.confirmPassword){var t=E.a.AES.encrypt(e.password,y.d);this.props.onSubmitForm(e.email,e.otp,t.toString())}}},{key:"loadingRender",value:function(){return l.a.createElement("div",{className:"text-center"},Object(O.c)())}},{key:"toggle",value:function(){this.setState({tooltipOpen:!this.state.tooltipOpen})}},{key:"checkStatus",value:function(){var e=this.props,t=e.fetching,a=e.fetched,n=e.error;return t||a&&null===n?l.a.createElement("div",{className:"login-status"},this.loadingRender()):a&&n&&n.data&&n.data.message?l.a.createElement("div",{className:"text-center"},l.a.createElement("p",null,n.data.message)):void 0}},{key:"resend",value:function(){this.state.form.email&&""!==this.state.form.email&&this.props.resend(this.state.form.email)}},{key:"render",value:function(){var e=this,t=this.state.form,a=t.email,n=t.password,o=t.confirmPassword,r=t.otp;return l.a.createElement(g.d,{initialValues:{email:a,password:n,confirmPassword:o,otp:r},validate:function(e){var t={};return e.email?/\s?\w+\s/i.test(e.email)&&(t.email=v.y):t.email=v.cb,e.otp||(t.otp=v.cb),e.password||(t.password=v.cb),e.password&&(/(?=.*?[A-Z])/g.test(e.password)&&/(?=.*?[a-z])/g.test(e.password)?/(?=.*?[0-9])/g.test(e.password)?/(?=.*?[#?!@$%^&*-])/g.test(e.password)?e.password.length<8&&(t.password=v.G):t.password=v.ub:t.password=v.b:t.password=v.ub),e.confirmPassword?e.password!==e.confirmPassword&&(t.confirmPassword=v.Q):t.confirmPassword=v.cb,t},onSubmit:function(t,a){var n=a.setSubmitting;setTimeout(function(){n(!1),e.handleSubmit(t)},400)},enableReinitialize:!0},function(t){var a=t.isSubmitting;return l.a.createElement(g.c,{className:h()({disabled:e.props.fetching||e.props.fetched&&null===e.props.error})},e.checkStatus(),l.a.createElement("div",{className:"extended"},l.a.createElement(w.b,{className:"forget-password mb-4",to:S.g},v.d)),l.a.createElement(g.b,{type:"text",name:"email",placeholder:v.m,autoComplete:"off"}),l.a.createElement(g.a,{name:"email",component:"div",className:"error-msg"}),l.a.createElement(g.b,{type:"text",name:"otp",placeholder:v.eb,autoComplete:"off"}),l.a.createElement(g.a,{name:"otp",component:"div",className:"error-msg"}),l.a.createElement(g.b,{type:"password",name:"password",placeholder:v.J,autoComplete:"off",id:"passTip"}),l.a.createElement(p.a,{placement:"top",isOpen:e.state.tooltipOpen,target:"passTip",toggle:e.toggle},"- ".concat(v.G),l.a.createElement("br",null),"- ".concat(v.b),l.a.createElement("br",null),"- ".concat(v.ub)),l.a.createElement(g.a,{name:"password",component:"div",className:"error-msg"}),l.a.createElement(g.b,{type:"password",name:"confirmPassword",placeholder:v.gb,autoComplete:"off"}),l.a.createElement(g.a,{name:"confirmPassword",component:"div",className:"error-msg"}),l.a.createElement("div",{className:"more-link"},l.a.createElement("button",{type:"submit",className:h()("btn btn-outline-secondary text-uppercase",{disabled:a})},v.C)),l.a.createElement("div",{className:"extended"},l.a.createElement(w.b,{className:"forget-password underline",to:S.k},v.db)))})}}]),t}(i.Component),_=a(983),k=a(971),C=(a(970),a(968)),P=a(936),N=function(e){function t(){var e,a;Object(n.a)(this,t);for(var o=arguments.length,c=new Array(o),i=0;i<o;i++)c[i]=arguments[i];return(a=Object(r.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).state={background:""},a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getLoginBackground()}},{key:"componentWillReceiveProps",value:function(e){void 0!==e.loginBackground.backGroundImage&&this.setState({background:e.loginBackground.backGroundImage}),e.fetchedChangePassword&&e.changePassword&&e.changePassword.message&&""!==e.changePassword.message&&Object(P.setTimeout)(function(){window.location=S.g},3e3)}},{key:"render",value:function(){var e=this.props,t=e.fetchingChangePassword,a=e.fetchedChangePassword,n=e.changeError,o=e.changePassword;return l.a.createElement(m.a,null,l.a.createElement("div",{className:"user-login-wrapper col-12",style:{backgroundImage:"url("+this.state.background+")"}},l.a.createElement(C.a,null),l.a.createElement("div",{className:"user-login"},l.a.createElement(R,{onSubmitForm:this.props.submitPasswordForReset,fetching:t,fetched:a,error:n,changePassword:o,resend:this.props.submitEmailForReset}))))}}]),t}(i.Component);var L=Object(d.b)(function(e){var t=e.resetForget,a=t.changeError,n=t.changePassword,o=t.fetchingChangePassword,r=t.fetchedChangePassword,s=t.resetError,c=t.emailReset,i=t.fetchingEmailReset,l=t.fetchedEmailReset,d=e.userLogin;return{changeError:a,changePassword:n,fetchingChangePassword:o,fetchedChangePassword:r,fetchingLoginBackground:d.fetchingLoginBackground,fetchedLoginBackground:d.fetchedLoginBackground,userLoginError:d.userLoginError,loginBackground:d.loginBackground,resetError:s,emailReset:c,fetchingEmailReset:i,fetchedEmailReset:l}},function(e){return{submitPasswordForReset:function(t,a,n){return e(_.a.submitPasswordForReset(t,a,n))},getLoginBackground:function(){return e(k.a.getLoginBackground())},submitEmailForReset:function(t){return e(_.a.submitEmailForReset(t))}}})(N);t.default=L},966:function(e,t,a){},967:function(e,t,a){e.exports=a.p+"images/Logo.31e15bfe.svg"},968:function(e,t,a){"use strict";var n=a(1),o=a.n(n),r=(a(966),a(967)),s=a.n(r),c=a(82);t.a=function(){return o.a.createElement("header",{className:"col-12 top-header"},o.a.createElement("div",{className:"logo text-center"},o.a.createElement("a",{href:c.g},o.a.createElement("img",{src:s.a,alt:"Aramis and Designer Fragrances"}))))}},970:function(e,t,a){},971:function(e,t,a){"use strict";var n=a(151),o=a.n(n),r=a(119);var s={getLoginBackground:function(){return function(e){e({type:"FETCH_LOGIN_BACKGROUND"}),o.a.get("/api/v1/loginBackgroundImage?_format=json").then(function(t){e({type:"FETCH_LOGIN_BACKGROUND_SUCCESS",payload:t.data}),window.localStorage.setItem("background",JSON.stringify(t.data))}).catch(function(t){e({type:"FETCH_LOGIN_BACKGROUND_FAILURE",payload:t}),e({type:"ADD_ERROR_WITHOUT_LOGOUT",payload:t})})}},submitLogin:function(e,t){return Object(r.e)(),function(a){a({type:"USER_LOGIN"}),o.a.post("/api/v1/login?_format=json",{username:e,password:t}).then(function(e){a({type:"USER_LOGIN_SUCCESS",payload:e.data})}).catch(function(e){a({type:"USER_LOGIN_FAILURE",payload:e.response}),a({type:"ADD_ERROR_WITHOUT_LOGOUT",payload:e})})}}};t.a=s},983:function(e,t,a){"use strict";var n=a(151),o=a.n(n);var r={submitEmailForReset:function(e){return function(t){t({type:"RESET_EMAIL"}),o.a.post("/api/v1/user/lost-password?_format=json",{mail:e}).then(function(e){t({type:"RESET_EMAIL_SUCCESS",payload:e.data}),t({type:"SUCCESS_MESSAGE",payload:e})}).catch(function(e){t({type:"RESET_EMAIL_FAILURE",payload:e}),t({type:"ADD_ERROR_WITHOUT_LOGOUT",payload:e})})}},submitPasswordForReset:function(e,t,a){return function(n){n({type:"CHANGE_PASSWORD"}),o.a.post("/api/v1/user/lost-password-reset?_format=json",{mail:e,tempPass:t,newPass:a}).then(function(e){n({type:"CHANGE_PASSWORD_SUCCESS",payload:e.data}),n({type:"SUCCESS_MESSAGE",payload:e})}).catch(function(e){n({type:"CHANGE_PASSWORD_FAILURE",payload:e}),n({type:"ADD_ERROR_WITHOUT_LOGOUT",payload:e})})}}};t.a=r}}]);